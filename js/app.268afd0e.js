(function(e){function t(t){for(var a,o,s=t[0],c=t[1],d=t[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/chord/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"21bb":function(e,t,n){"use strict";var a=n("2dad"),r=n.n(a);r.a},"2dad":function(e,t,n){},5712:function(e,t){e.exports="data:image/png;base64,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"},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},7271:function(e,t,n){e.exports={"chord-item-cpn":"index-module_chord-item-cpn_1jYve","chord-item__result":"index-module_chord-item__result_aZi44"}},"8e1f":function(e,t,n){},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=(n("5c0b"),n("2877")),s={},c=Object(o["a"])(s,r,i,!1,null,null,null),d=c.exports,l=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"chord-cardBox"},e._l(e.keyMaps,(function(t){return n("div",{key:t.name,staticClass:"chord-card"},[n("h3",[e._v(e._s(t.name))]),n("div",{staticClass:"chord-box"},[n("Chord",{ref:"chord",refInFor:!0,attrs:{answer:t.map}})],1)])})),0),n("div",{staticClass:"chord-create-box"},[n("div",{staticClass:"chord-card"},[n("h3",{staticClass:"chard-create-title"},[e._v("新建和弦")]),n("van-field",{attrs:{label:"名称",placeholder:"请输入和弦名不可重复"},model:{value:e.newKey.name,callback:function(t){e.$set(e.newKey,"name",t)},expression:"newKey.name"}}),n("div",{staticClass:"chord-box"},[n("Chord",{ref:"chordAdd"})],1),n("div",{staticClass:"chard-create-btn",on:{click:e.addChord}},[e._v("确定")])],1)])])},h=[],f=(n("d81d"),n("b0c0"),n("d3b7"),n("ddb0"),n("cb29"),n("25f0"),n("d4ec")),g=n("bee2"),C=n("262e"),I=n("2caf"),p=n("9ab4"),m=n("60a3"),k=n("7271"),v=n.n(k),w={width:20,height:83,fill:"white"},A={width:13,height:47,fill:"black"},Q=function(e){Object(C["a"])(a,e);var t=Object(I["a"])(a);function a(){var e;return Object(f["a"])(this,a),e=t.apply(this,arguments),e.configKonva={width:14*w.width+10,height:w.height+5,offsetX:-5,offsetY:-2.5},e.keys=new Array(24).fill(0),e.hoverIndex=null,e.whiteKeyRect=w,e.blackKeyRect=A,e}return Object(g["a"])(a,[{key:"render",value:function(){var e=this,t=arguments[0];return t("div",{class:v.a.chordItemCpn},[t("konva-stage",{attrs:{config:this.configKonva},ref:"stage",style:14*this.whiteKeyRect.width+20},[t("konva-layer",[t("konva-group",[this.keys.map((function(n,a){return t("konva-rect",{on:{mouseenter:e.handleMouseEnter.bind(e,a),mouseleave:e.handleMouseLeave,click:e.handleClick.bind(e,a),tap:e.handleClick.bind(e,a)},attrs:{config:e.getKeyRect(a,n,e.hoverIndex)},key:a})}))])])]),t("div",{class:v.a.chordItem__result},[this.resultRight?t("span",[t("img",{attrs:{width:"24",height:"24",src:n("5712"),alt:"right"}})]):""])])}},{key:"getKeyRect",value:function(e,t,n){var a=e%12,r=Math.floor(e/12),i={stroke:"black",strokeWidth:2,fill:"#ffffff"};return a<7?(Object.assign(i,w),i.x=a*w.width+7*r*w.width,i.y=0):(Object.assign(i,A),i.x=(a-7<2?a-7:a-6)*w.width+w.width-A.width/2+7*r*w.width,i.y=0),n===e&&(i.fill="gray"),0!==t&&(i.fill="#ffb8b8"),i}},{key:"handleClick",value:function(e){this.keys=this.keys.map((function(t,n){return e===n?0===t?1:0:t})),this.$emit("change",this.keys)}},{key:"handleMouseEnter",value:function(e){this.hoverIndex=e;var t=this.$refs.stage.getStage();t&&(t.container().style.cursor="pointer")}},{key:"handleMouseLeave",value:function(){this.hoverIndex=null;var e=this.$refs.stage.getStage();e&&(e.container().style.cursor="pointer")}},{key:"resultRight",get:function(){return!!this.answer&&this.keys.toString()===this.answer.toString()}}]),a}(m["c"]);Object(p["a"])([Object(m["b"])()],Q.prototype,"answer",void 0),Q=Object(p["a"])([Object(m["a"])({name:"Chord"})],Q);var y=Q,b={name:"Home",components:{Chord:y},data:function(){return{keyMaps:[],newKey:{name:"",answer:[]}}},methods:{handleClick:function(){var e=this,t=this.$refs.chord;console.log(t.map((function(t,n){return{name:e.keyMaps[n].name,map:t.keys}})))},addChord:function(){var e=this.$refs.chordAdd;this.$answerStorage.addAnswer({name:this.newKey.name,map:[e.keys]})&&(this.newKey.name="")}},created:function(){this.keyMaps=this.$answerStorage.getSavedAnswers()}},J=b,E=(n("21bb"),Object(o["a"])(J,u,h,!1,null,null,null)),j=E.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},O=[],M={name:"TestPage",components:{},methods:{add:function(e){alert(JSON.stringify(e))}}},U=M,K=Object(o["a"])(U,B,O,!1,null,"73cc5b26",null),S=K.exports;a["default"].use(l["a"]);var x=[{path:"/",name:"Home",component:j},{path:"/test",name:"Test",component:S}],G=new l["a"]({routes:x}),Z=G,R=n("2f62");a["default"].use(R["a"]);var Y=new R["a"].Store({state:{isMobile:"ontouchstart"in window},mutations:{},actions:{},modules:{}}),D=n("7591"),L=n.n(D),N=(n("a630"),n("45fc"),n("a434"),n("6062"),n("3ca3"),n("9a83"),n("f564")),V="chordAnswer",T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:[]};Object(f["a"])(this,e),this.data=[],this.storage=window.localStorage;var n=JSON.parse(""+this.storage.getItem(V));n&&n.length>0||(n=t.default),this.loadAnswers(n)}return Object(g["a"])(e,[{key:"addAnswer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.data.length;return this.checkAnswer(e)?(this.data.splice(t,0,e),this.syncStorage(),Object(N["a"])({type:"success",message:"保存成功"}),!0):(Object(N["a"])({type:"warning",message:"和弦名称不能重复"}),!1)}},{key:"delAnswer",value:function(e){this.data.splice(e,1),this.syncStorage(),Object(N["a"])({type:"success",message:"删除成功"})}},{key:"loadAnswers",value:function(e){this.validate(e)?(this.data=e,this.syncStorage(),Object(N["a"])({type:"success",message:"导入成功"})):Object(N["a"])({type:"warning",message:"和弦名称不能有重复"})}},{key:"syncStorage",value:function(){this.storage.setItem("chordAnswer",JSON.stringify(this.data))}},{key:"getSavedAnswers",value:function(){return this.data}},{key:"clearStorage",value:function(){this.storage.setItem(V,"[]")}},{key:"checkAnswer",value:function(e){return!this.data.some((function(t){return t.name===e.name}))}},{key:"validate",value:function(e){var t=e.map((function(e){return e.name}));return t.length===Array.from(new Set(t)).length}}]),e}(),X={install:function(e,t){e.prototype.$answerStorage=new T(t)}},H=X,P=[{name:"C",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{name:"Cm",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{name:"Cdim",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{name:"Caug",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{name:"C7",map:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}],F=(n("8e1f"),n("be7f"),n("565f"));a["default"].use(F["a"]),a["default"].use(H,{default:P}),a["default"].use(L.a,{prefix:"Konva"}),a["default"].config.productionTip=!1,new a["default"]({router:Z,store:Y,render:function(e){return e(d)}}).$mount("#app")}});
//# sourceMappingURL=app.268afd0e.js.map